<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="login.css">
  <title>Login</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
</head>
<body class="fondo">
  <div class="caja grande">
    <h2 class="titulo">Login</h2>

    <form id="f1" class="formu">
      <input type="text" id="u" class="cajaTexto" placeholder="usuario" required />
      <input type="password" id="p" class="cajaTexto" placeholder="clave" required />
      <button type="submit" class="boton">Entrar</button>
    </form>

    <h4 class="subtitulo">Â¿No tienes cuenta?</h4>

    <form id="f2" class="formu">
      <input type="text" id="nu" class="cajaTexto" placeholder="nuevo usuario" required />
      <input type="password" id="np" class="cajaTexto" placeholder="nueva clave" required />
      <button type="submit" class="boton verde">Crear cuenta</button>
    </form>
  </div>
  <script>
    document.getElementById("f2").addEventListener("submit", function(e) {
      e.preventDefault();
      const us = document.getElementById("nu").value.trim();
      const cl = document.getElementById("np").value.trim();
      if(us.length < 3 || cl.length < 4){
        alert("usuario min 3 letras y clave min 4 letras");
        return;
      }
      localStorage.setItem("user_" + us, cl);
      alert("Cuenta creada exitosamente");
      this.reset();
    });

    document.getElementById("f1").addEventListener("submit", function(e) {
      e.preventDefault();
      const us = document.getElementById("u").value.trim();
      const cl = document.getElementById("p").value.trim();
      const guardada = localStorage.getItem("user_" + us);
      if(!guardada){
        alert("No existe la cuenta");
        return;
      }
      if(guardada === cl){
        localStorage.setItem("userActual", us);
        window.location.href = "registro.html";
      } else {
        alert("Clave mal");
      }
    });
  </script>
</body>
</html>
